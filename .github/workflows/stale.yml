name: "Stale Issues and PRs"

on:
  schedule:
    # Run daily at 00:00 UTC
    - cron: "0 0 * * *"
  workflow_dispatch:

permissions:
  issues: write
  pull-requests: write

jobs:
  stale:
    runs-on: ubuntu-latest
    steps:
      - name: Mark stale issues and PRs
        uses: actions/stale@v9
        with:
          # Issue configuration
          days-before-issue-stale: 30
          days-before-issue-close: 14
          stale-issue-label: "stale"
          stale-issue-message: |
            This issue has been automatically marked as stale because it has not had recent activity.
            It will be closed in 14 days if no further activity occurs.
            If this issue is still relevant, please comment or update the issue to keep it open.
            Thank you for your contributions! üôè
          close-issue-message: |
            This issue has been automatically closed due to inactivity.
            If you believe this issue is still relevant, please feel free to reopen it or create a new issue.
            Thank you for your understanding! üôè

          # PR configuration
          days-before-pr-stale: 21
          days-before-pr-close: 7
          stale-pr-label: "stale"
          stale-pr-message: |
            This pull request has been automatically marked as stale because it has not had recent activity.
            It will be closed in 7 days if no further activity occurs.
            Please update this PR if you'd like to keep it open.
          close-pr-message: |
            This pull request has been automatically closed due to inactivity.
            Feel free to reopen if you want to continue working on this.

          # Labels that exempt from being marked stale
          exempt-issue-labels: "pinned,security,bug,enhancement,good first issue,help wanted,in-progress"
          exempt-pr-labels: "pinned,security,work-in-progress,do-not-close"

          # Only process issues/PRs with no activity
          remove-stale-when-updated: true

          # Operation limits
          operations-per-run: 100
