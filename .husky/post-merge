#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

echo "ğŸ”„ Post-merge hook running..."

# Check if package.json or pnpm-lock.yaml changed
if git diff HEAD@{1} --name-only | grep -E "(package\.json|pnpm-lock\.yaml)" > /dev/null; then
  echo "ğŸ“¦ Dependencies changed, running pnpm install..."
  pnpm install
fi

# Check if database schema changed
if git diff HEAD@{1} --name-only | grep -E "schema\.prisma" > /dev/null; then
  echo "ğŸ—„ï¸  Database schema changed, consider running migrations..."
  echo "Run: pnpm db:push or pnpm db:migrate"
fi

echo "âœ… Post-merge hook completed!"